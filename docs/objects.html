<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Flow | Objects</title>
    <link rel='stylesheet' href='/static/flow.css' type='text/css'/>
    <link rel='stylesheet' href='/static/syntax.css' type='text/css'/>
    <link rel="stylesheet" href='/static/pygments.css' type='text/css'/>
    <link rel='shortcut icon' href='/static/favicon.png'>
    <meta name='viewport' content='width=480'>
    <meta property="og:title" content="Objects" />
    <meta property="og:site_name" content="flowtype">
    <meta property='og:description' content='Flow is a static type checker for
    JavaScript.'>
    <meta property='og:image' content='http://flowtype.org/static/flow-og-image.png'>
    <meta property='og:url' content="http://flowtype.org/docs/objects.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
    <script type="text/javascript">{'try{Typekit.load();}catch(e){}'}</script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-49208336-4', 'auto');
      ga('send', 'pageview');
    </script>
    <link rel="alternate" type="application/rss+xml" title="Flow" href="http://flowtype.org/blog/feed.xml">
</head>
<body>

<header class='topbar'><nav class='width'>
<a href='/'>
  <img src="/static/flow-logo.png" class="logo">
</a>
    <ul>
      <li><a href="/docs/getting-started.html#_"
           class="active" >
          Docs
      </a></li>
      <li><a href="/docs/about-flow.html#_"
          >
          About
      </a></li>
      <li><a href="/support.html"
          >
          Support
      </a></li>
      <li><a href="/blog"
          >
          Blog
      </a></li>
      <li><a href="http://github.com/facebook/flow">GitHub</a>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/docs/about-flow.html#_">
              About Flow
            </a>
            
          </li>
        
          <li>
            <a href="/docs/getting-started.html#_">
              Getting started with Flow
            </a>
            
          </li>
        
          <li>
            <a href="/docs/five-simple-examples.html#_">
              Five simple examples
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>User Guide</h3>
      <ul>
        
          <li>
            <a href="/docs/new-project.html#_">
              Starting a new Flow project
            </a>
            
          </li>
        
          <li>
            <a href="/docs/existing.html#_">
              Running Flow on existing code
            </a>
            
          </li>
        
          <li>
            <a href="/docs/third-party.html#_">
              Checking third-party code
            </a>
            
          </li>
        
          <li>
            <a href="/docs/running.html#_">
              Running Flow code
            </a>
            
          </li>
        
          <li>
            <a href="/docs/troubleshooting.html#_">
              Troubleshooting
            </a>
            
          </li>
        
          <li>
            <a href="/docs/advanced-configuration.html#_">
              Advanced Configuration
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Walkthroughs</h3>
      <ul>
        
          <li>
            <a href="/docs/react-example.html#_">
              A Flux & React demo
            </a>
            
          </li>
        
          <li>
            <a href="/docs/underscore.html#_">
              Flow, meet Underscore
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Coming Soon</h3>
      <ul>
        
          <li>
            <a href="/docs/coming-soon.html#_">
              Future plans
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Language Reference</h3>
      <ul>
        
          <li>
            <a href="/docs/quick-reference.html#_">
              Quick Reference
            </a>
            
          </li>
        
          <li>
            <a href="/docs/type-annotations.html#_">
              Type Annotations
            </a>
            
          </li>
        
          <li>
            <a href="/docs/variables.html#_">
              Variables
            </a>
            
          </li>
        
          <li>
            <a href="/docs/arrays.html#_">
              Arrays and Tuples
            </a>
            
          </li>
        
          <li>
            <a href="/docs/classes.html#_">
              Classes
            </a>
            
          </li>
        
          <li>
            <a href="/docs/objects.html#_" class="active">
              Objects
            </a>
            
          </li>
        
          <li>
            <a href="/docs/functions.html#_">
              Functions
            </a>
            
          </li>
        
          <li>
            <a href="/docs/nullable-types.html#_">
              Maybe Types
            </a>
            
          </li>
        
          <li>
            <a href="/docs/destructuring.html#_">
              Destructuring
            </a>
            
          </li>
        
          <li>
            <a href="/docs/union-intersection-types.html#_">
              Union and Intersection Types
            </a>
            
          </li>
        
          <li>
            <a href="/docs/type-aliases.html#_">
              Type Aliases
            </a>
            
          </li>
        
          <li>
            <a href="/docs/typeof.html#_">
              Typeof types
            </a>
            
          </li>
        
          <li>
            <a href="/docs/operators.html#_">
              Operators
            </a>
            
          </li>
        
          <li>
            <a href="/docs/dynamic-type-tests.html#_">
              Dynamic Type Tests
            </a>
            
          </li>
        
          <li>
            <a href="/docs/primitives.html#_">
              Primitives
            </a>
            
          </li>
        
          <li>
            <a href="/docs/modules.html#_">
              Modules
            </a>
            
          </li>
        
          <li>
            <a href="/docs/declarations.html#_">
              Declarations
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>CLI</h3>
      <ul>
        
          <li>
            <a href="/docs/cli.html#_">
              Using the CLI
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>
      Objects
      <a class="edit-page-link" href="https://github.com/facebook/flow/tree/master/website/docs/01-objects.md" target="_blank">Edit on GitHub</a>
    </h1>
    <p></p>

    <p>Objects can be created with object literals. The types of properties are fixed
based on their initializers.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">x</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Flow infers the type of property <code>x</code> of the object to be number since it is
initialized with a <code>number</code>. The method call <code>foo()</code> on the object writes
<code>string</code> to that property. As expected, running Flow produces the following
error:</p>
<div class="highlight"><pre><code class="language-bbcode" data-lang="bbcode">file.js:6:7,13: string
This type is incompatible with
  file.js:3:6,7: number
</code></pre></div>
<h2>Object Types</h2>

<p>Object types are of the form:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="p">{</span> <span class="nl">x1</span><span class="p">:</span> <span class="nx">T1</span><span class="p">;</span> <span class="nl">x2</span><span class="p">:</span> <span class="nx">T2</span><span class="p">;</span> <span class="p">...</span> <span class="nx">x3</span><span class="err">:</span> <span class="nx">T3</span><span class="p">;}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here is an example of declaring an object type:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">obj</span><span class="err">:</span> <span class="p">{</span><span class="nl">a</span><span class="p">:</span> <span class="kr">boolean</span><span class="p">;</span> <span class="nl">b</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nl">c</span><span class="p">:</span> <span class="nx">Foo</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="s2">"Hi"</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">()}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here is an example of Flow catching a problem with your object type:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{}</span>
<span class="kr">class</span> <span class="nx">Bar</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">obj</span><span class="err">:</span> <span class="p">{</span><span class="nl">a</span><span class="p">:</span> <span class="kr">boolean</span><span class="p">;</span> <span class="nl">b</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nl">c</span><span class="p">:</span> <span class="nx">Foo</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="s2">"Hi"</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Bar</span><span class="p">()}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>
<div class="highlight"><pre><code class="language-bbcode" data-lang="bbcode">/tmp/flow/f.js:4:70,72: Bar
This type is incompatible with
  /tmp/flow/f.js:2:7,9: Foo
</code></pre></div>
<h2>Reusable Object Types</h2>

<p>Object types can be made reusable through the use of
<a href="type-aliases.html">type aliases</a>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="nx">type</span> <span class="nx">MyType</span> <span class="o">=</span> <span class="p">{</span><span class="na">message</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nl">isAwesome</span><span class="p">:</span> <span class="kr">boolean</span><span class="p">};</span>
<span class="kd">function</span> <span class="nx">sayHello</span><span class="p">(</span><span class="nx">data</span><span class="err">:</span> <span class="nx">MyType</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">mySampleData</span><span class="err">:</span> <span class="nx">MyType</span> <span class="o">=</span> <span class="p">{</span><span class="na">message</span><span class="p">:</span> <span class="s1">'Hello World'</span><span class="p">,</span> <span class="na">isAwesome</span><span class="p">:</span> <span class="kc">true</span><span class="p">};</span>
<span class="nx">sayHello</span><span class="p">(</span><span class="nx">mySampleData</span><span class="p">);</span>
<span class="nx">sayHello</span><span class="p">({</span><span class="na">message</span><span class="p">:</span> <span class="s1">'Hi'</span><span class="p">,</span> <span class="na">isAwesome</span><span class="p">:</span> <span class="kc">false</span><span class="p">});</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2>Optional properties</h2>

<p>Object types can have optional properties. The following code shows how
optional properties allow objects with missing properties to be typed.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kd">var</span> <span class="nx">obj</span><span class="err">:</span> <span class="p">{</span> <span class="nl">a</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">b</span><span class="p">?:</span> <span class="nx">number</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="s2">"hello"</span> <span class="p">};</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>When optional properties are accessed, Flow tracks the fact that they could
be <code>undefined</code>, and reports errors when they are used as is.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kd">var</span> <span class="nx">obj</span><span class="err">:</span> <span class="p">{</span> <span class="nl">a</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">b</span><span class="p">?:</span> <span class="nx">number</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="s2">"hello"</span> <span class="p">};</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">b</span> <span class="o">*</span> <span class="mi">10</span> <span class="c1">// error: undefined is incompatible with number</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>One way to avoid errors is to dynamically check that an optional property exists
before using it. See <a href="http://flowtype.org/docs/nullable-types.html#_">nullable types</a> for details.</p>

<h2>Constructor Functions and Prototype Objects</h2>

<p>Another way of creating objects in JavaScript is by using <code>new</code> on
constructor functions. A constructor function is typically an open method
that &quot;initializes&quot; some properties of <code>this</code>; and a <code>new</code> operation on such a
function calls it on a freshly created object before returning it.</p>

<p>Additionally, a constructor function may set various properties on its
<code>prototype</code> object. These properties are typically methods, and are inherited
by all objects created from that constructor function by a process known as
prototype chaining.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kd">function</span> <span class="nx">Foo</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span> <span class="p">}</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">x</span><span class="err">:</span> <span class="nx">number</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">f</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>In this code, a <code>new</code> object is created by <code>new Foo(42)</code>; this object has a
property <code>x</code> initialized by <code>Foo</code> with the <code>number</code> passed to it. The object
also responds to the <code>f</code> method defined in <code>Foo.prototype</code>, so <code>o.f()</code> reads
<code>o.x</code> and returns it. This fits with the expectation of a <code>number</code> as
expressed by the annotation at line 7, so this code typechecks.</p>

<p>Furthermore, Flow ensures that an object&#39;s type can always be viewed as a
subtype of its constructor&#39;s <code>prototype type</code>. (This is analogous to subtyping
based on class inheritance.) This means that the following code typechecks:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="p">...</span>
<span class="kd">var</span> <span class="nx">o</span><span class="err">:</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2>Adding properties</h2>

<p>It is a common idiom in JavaScript to add properties to objects after they are
created. In fact, we have already seen this idiom on several occasions above:
when initializing properties of <code>this</code> properties in a constructor function;
when building a constructor function&#39;s <code>prototype</code> object; when building a
<code>module.exports</code> object; and so on.</p>

<p>Flow supports this idiom. As far as we know, this is a type system novelty:
supporting this idiom while balancing other constraints of the type system,
such as sound subtyping over objects and prototypes, can be quite tricky!</p>

<p>However, for a property that may be added to an object after its creation,
Flow cannot guarantee the existence of that property at a particular property
access operation; it can only check that its writes and reads are type-
consistent. Providing such guarantees for dynamic objects would significantly
complicate the analysis; this is a well-known fact (in technical terms, Flow&#39;s
analysis is heap-insensitive for strong updates).</p>

<p>For example, the following code typechecks:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span> <span class="nx">p</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">bar</span><span class="p">(</span><span class="nx">q</span><span class="p">)</span> <span class="p">{</span> <span class="nx">q</span><span class="p">.</span><span class="nx">f</span><span class="p">();</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="p">};</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span> <span class="p">};</span>

<span class="nx">bar</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="nx">foo</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>In this code, when <code>bar(o)</code> is called, <code>o.x</code> is undefined; only later is it
initialized by <code>foo(o)</code>, but it is hard to track this fact statically.</p>

<p>Fortunately, though, the following code does not typecheck:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cm">/* @flow */</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span> <span class="nx">p</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">bar</span><span class="p">(</span><span class="nx">q</span><span class="p">)</span> <span class="p">{</span> <span class="nx">q</span><span class="p">.</span><span class="nx">f</span><span class="p">();</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="p">};</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span> <span class="p">};</span>

<span class="nx">foo</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">x</span><span class="err">:</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">bar</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>
<div class="highlight"><pre><code class="language-bbcode" data-lang="bbcode">file.js:3:16,16: undefined
This type is incompatible with
  file.js:8:7,12: string
</code></pre></div>
<p>In other words, Flow knows enough to infer that whenever the <code>x</code> property of
<code>o</code> does exist, it is a number, so a <code>string</code> should not be expected.</p>

<h2>Sealed object types</h2>

<p>Unfortunately, supporting dynamically added properties means that Flow can miss
errors where the programmer accesses a non-existent property by mistake. Thus, Flow
also supports sealed object types, where accesses of non-existent properties are reported
as errors.</p>

<p>When object types appear as annotatations, they are considered sealed. Also, non-empty
object literals are considered to have sealed object types. In fact, the only cases where
an object type is not sealed are when it describes an empty object literal (to be extended
by adding properties to it), an object literal with <a href="https://github.com/sebmarkbage/ecmascript-rest-spread">spread properties</a>, or when it describes a map (see below).</p>

<p>Overall, the weaker guarantee for dynamically added properties is a small cost
to pay for the huge increase in flexibility it affords. Specifically, it
allows Flow to usefully type check lots of idiomatic JavaScript code, while
trusting the programmer to follow the discipline of fully initializing an
object before making it available, which effectively ensures that any
dynamically added properties during initialization are only accessed after
initialization is complete.</p>

<p>In any case, for most objects you can altogether avoid adding properties
dynamically, in which case you get stronger guarantees. Furthermore, as
described above, object type annotations are sealed, so you can always force
sealing by going through an annotation (and sealing is enforced at module
boundaries).</p>

<h2>Objects as Maps</h2>

<p>An object can be viewed as a map from <code>string</code> to some value type by setting
and getting its properties via bracket notation (i.e. dynamic accessors),
instead of dot notation. Flow infers a precise value type for the map: in
other words, if you only write <code>number</code> values to a map, you will read <code>number</code>values back (rather than, say, <code>any</code>).</p>

<p>Such a map can be given a type of the form <code>{ [key: string]: number }</code> where <code>string</code> is the key type and <code>number</code> is the
value type of the map.</p>

<h3>Maps as Records</h3>

<p>Viewing an object as a map does not preclude viewing it as a record. However,
for such an object, the value type of the map does not interfere with the
types of the properties of the record. This is potentially unsound, but we
admit it because a sound design would necessarily lead to severe imprecision
in the types of properties.</p>


    <div class="docs-prevnext">
      
        <a href="/docs/classes.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/docs/functions.html#_">Next &rarr;</a>
      
    </div>

    <a id="_"></a>
</article>

</div></section>
<footer><div class='width'>
    &copy; Copyright 2014 - 2016, Facebook Inc.
</div></footer>

<script src="/static/linkify.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-387204-12', 'facebook.github.io');
  ga('send', 'pageview');

  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script>
</body>
</html>

